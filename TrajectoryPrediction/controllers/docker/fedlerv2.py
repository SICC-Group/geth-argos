#!/usr/bin/env python3
import pickle
import socket
import time, sys, os
import subprocess
import copy
import random
from hexbytes import HexBytes

from console import *
from aux import TCP_mp, TCP_server, TCP_server2, l2d, getFolderSize

class seblogger:
	def __init__(self, logfile, header) -> None:
		self.logfile = logfile
		self.header = header
		self.log(self.header, 'w')
	
	def log(self, data:list, method='a'):
		data = ','.join([str(x) for x in data])
		with open(self.logfile, method) as file:
			file.write(f'{data}\n')


def getEnodes():
    return [peer['enode'] for peer in w3.geth.admin.peers()]

def getIps(__enodes = None):
    if __enodes:
        return [enode.split('@',2)[1].split(':',2)[0] for enode in __enodes]
    else:
        return [enode.split('@',2)[1].split(':',2)[0] for enode in getEnodes()]

# peers_geth is the set [ips] we get from geth.admin 
# peers_buffer is our local buffer set [ips]
global peers_geth, peers_buffer, logs
peers_geth, peers_buffer = set(), set()
logs = {}
price = 5*10**18

def INIT_WEIGHTS():
	return [0.2874026596546173,0.027187973260879517,-0.007994145154953003,-0.06229488551616669,0.28415441513061523,-0.022219866514205933,0.20925664901733398,-0.1346205174922943,0.2322823405265808,0.15505990386009216,0.023618191480636597,0.2847191095352173,0.22300761938095093,0.1802263855934143,-0.04187771677970886,0.19466286897659302,0.10857626795768738,0.041655510663986206,0.0809902548789978,0.1387118399143219,0.16435641050338745,0.27016937732696533,0.2230347990989685,0.2128734588623047,0.09117469191551208,0.04805314540863037,0.24884307384490967,-0.27945590019226074,0.010075241327285767,-0.26232245564460754,-0.13662247359752655,0.16787752509117126,-0.1531422883272171,0.15698912739753723,-0.21137741208076477,-0.2958793640136719,0.2515128254890442,-0.028278201818466187,-0.03181275725364685,-0.04218071699142456,0.0862872302532196,-0.019810378551483154,-0.19935867190361023,0.1114480197429657,-0.21191167831420898,-0.08582767844200134,-0.28616708517074585,-0.03595969080924988,-0.19231033325195312,0.09918457269668579,0.017631590366363525,-0.1525840163230896,-0.20840464532375336,-0.06651847064495087,0.21960186958312988,0.14864367246627808,0.04437926411628723,0.005505084991455078,0.18703454732894897,0.28011393547058105,0.062131911516189575,0.1402857005596161,-0.0018974244594573975,-0.24172154068946838,0.10100063681602478,-0.15658289194107056,-0.0022751986980438232,-0.14758464694023132,-0.18915677070617676,-0.17765596508979797,0.24595749378204346,-0.053891852498054504,0.22859501838684082,-0.27001288533210754,-0.24412065744400024,0.06624430418014526,0.20400714874267578,-0.06839995086193085,0.2087046504020691,0.04050806164741516,0.09250608086585999,0.1416562795639038,0.16574180126190186,-0.15465843677520752,-0.08036600053310394,0.05577361583709717,0.23597413301467896,0.1320664882659912,-0.16136717796325684,0.23841392993927002,0.18990150094032288,-0.19453173875808716,-0.1337530016899109,0.026779651641845703,-0.15411224961280823,-0.05915045738220215,0.1337849199771881,0.30113303661346436,-0.2042454034090042,-0.11495102941989899,0.08867737650871277,0.023077964782714844,-0.07000379264354706,0.2102261781692505,0.01016494631767273,0.13272324204444885,0.03255912661552429,0.21016418933868408,0.12540408968925476,-0.23215675354003906,-0.24739593267440796,0.07512271404266357,-0.0557623952627182,-0.29864251613616943,0.2584913969039917,-0.19756841659545898,-0.11183585226535797,-0.07758250832557678,-0.26914674043655396,0.2976861596107483,0.21504002809524536,0.18065854907035828,0.15781623125076294,-0.05982819199562073,0.2740147113800049,0.039537400007247925,-0.037463992834091187,0.04284012317657471,0.0732959508895874,-0.03897401690483093,-0.024750037118792534,0.008525923825800419,-0.1364019215106964,-0.04963569715619087,0.0598834790289402,-0.12724190950393677,0.16140571236610413,0.17242753505706787,-0.17134279012680054,-0.015327421948313713,-0.019288605079054832,0.21202103793621063,-0.025767501443624496,-0.0637202039361,-0.08837427198886871,-0.07523857802152634,-0.021901201456785202,0.05545971170067787,0.09020863473415375,0.33536213636398315,0.1114358976483345,0.033493828028440475,-0.1251853108406067,-0.06391332298517227,0.005683109629899263,0.0885246992111206,0.031443431973457336,-0.011560291983187199,-0.019169865176081657,0.0005442397086881101,0.18310049176216125,-0.20357239246368408,-0.0908208042383194,-0.16270214319229126,0.15518489480018616,-0.16255538165569305,-0.1449238657951355,-0.03912733122706413,0.32857969403266907,-0.021695857867598534,0.1387571096420288,0.006412089802324772,0.23154500126838684,-0.006776110734790564,0.19883719086647034,-0.07460078597068787,0.1271653175354004,-0.06994428485631943,-0.03399396315217018,0.1325562447309494,0.003249487141147256,0.23107312619686127,0.2543830871582031,0.022475838661193848,-0.18966805934906006,0.09922749549150467,-0.021923420950770378,0.0868477150797844,0.07898423075675964,-0.0017157240072265267,0.07766566425561905,-0.046030811965465546,-0.10177174210548401,-0.1365380585193634,0.17605529725551605,0.0029280087910592556,0.1096716821193695,-0.07281167060136795,0.11020954698324203,-0.01425559539347887,-0.11513544619083405,-0.054197803139686584,-0.13204938173294067,-0.011674724519252777,0.05644158273935318,0.008529050275683403,0.10185014456510544,-0.12945114076137543,0.23418501019477844,0.05107260122895241,-0.1922510713338852,-0.16739816963672638,0.08801092207431793,0.1561897099018097,-0.021863922476768494,0.050803523510694504,0.03191187232732773,-0.048600468784570694,-0.19413426518440247,0.027352258563041687,0.14462190866470337,0.12484708428382874,-0.07812368124723434,0.17651033401489258,-0.1743629425764084,0.013656402006745338,0.07694584131240845,0.0898955911397934,0.04198857396841049,0.31406188011169434,0.014090990647673607,-0.0685601755976677,-0.18017616868019104,0.037855323404073715,0.05696842446923256,-0.004905881360173225,0.03957301005721092,-0.2566729485988617,0.1323174685239792,0.03733273595571518,0.02566887065768242,-0.05637959763407707,-0.10672710090875626,-0.12471631914377213,0.07870977371931076,0.15507425367832184,0.17671319842338562,0.18476630747318268,0.008387166075408459,0.02693646028637886,0.1824243813753128,-0.12494470179080963,0.08748948574066162,-0.2698957026004791,0.1402428150177002,-0.1526525616645813,0.10342523455619812,-0.2944868505001068,0.08557964116334915,0.12454351782798767,-0.04194999486207962,0.19493907690048218,0.08522439002990723,-0.01541749108582735,0.0027024876326322556,-0.1770707219839096,0.1204359382390976,0.007153543643653393,0.16600900888442993,0.10673195123672485,0.07905910164117813,-0.035067152231931686,-0.15139274299144745,-0.0032505514100193977,0.01603204570710659,-0.09560620784759521,0.09470054507255554,-0.04908772185444832,-0.02525227889418602,-0.20319117605686188,-0.03466257080435753,-0.10225669294595718,0.14430123567581177,-0.020094476640224457,0.17807669937610626,0.20227457582950592,0.20348218083381653,-0.0838836282491684,-0.23198731243610382,-0.292513370513916,-0.22437475621700287,-0.09793558716773987,-0.14296412467956543,0.1256394386291504,-0.07484632730484009,0.16886676847934723,-0.09947849810123444,0.04946053400635719,-0.12060020864009857,-0.07019007951021194,0.07943142205476761,0.10818441212177277,-0.06250548362731934,-0.0977916345000267,-0.12817156314849854,0.06610903143882751,0.15513825416564941,0.1224374771118164,-0.08631032705307007,-0.05567874014377594,0.18485932052135468,0.04589712247252464,-0.09246645867824554,-0.06225338578224182,-0.040955789387226105,-0.02150234580039978,-0.0928795337677002,0.0688580870628357,-0.02939782477915287,-0.1792021542787552,-0.0697602778673172,0.14882464706897736,0.011960682459175587,0.1590643972158432,0.12002275884151459,0.07960375398397446,-0.10048821568489075,-0.017458751797676086,-0.47819623351097107,-0.14084704220294952,-0.09076092392206192,0.05058788135647774,0.03159647434949875,-0.0979100689291954,0.17261062562465668,0.24832311272621155,-0.05263605713844299,-0.10347408056259155,0.019352251663804054,-0.1725660264492035,0.07658423483371735,-0.007548132911324501,-0.1443895697593689,-0.01107104029506445,0.020714540034532547,-0.16032256186008453,-0.05102679505944252,0.015548176132142544,-0.009402195923030376,-0.08393750339746475,0.026076389476656914,-0.17028674483299255,0.09684591740369797,-0.004607215523719788,-0.18425066769123077,-0.08603715896606445,0.17165395617485046,0.034553539007902145,0.13585636019706726,-0.09743676334619522,0.1439662128686905,0.09177194535732269,-0.18496988713741302,-0.006734867114573717,0.16936518251895905,-0.030221447348594666,0.25422051548957825,0.007306390907615423,0.02149926871061325,0.00934610515832901,0.05637737736105919,-0.033763740211725235,0.006549058016389608,-0.07663840055465698,0.1150449886918068,0.00701569952070713,-0.028268512338399887,-0.1301863193511963,0.09746579825878143,0.09603455662727356,0.04678170010447502,0.06059998646378517,0.041140589863061905,0.28912368416786194,0.06548579037189484,0.046462252736091614,0.09111049026250839,-0.12563851475715637,0.1456025391817093,-0.07624565064907074,0.16567787528038025,0.061057642102241516,0.07156985253095627,0.13652940094470978,0.13233163952827454,0.12823638319969177,-0.1327057182788849,0.08661647140979767,0.2038848102092743,-0.05081293359398842,0.018151450902223587,-0.1311568170785904,0.02838626317679882,-0.1646273136138916,0.027175448834896088,0.11395831406116486,-0.26757362484931946,0.10482977330684662,0.025307297706604004,0.0914134532213211,0.2065187245607376,-0.047601521015167236,-0.09266839921474457,-0.0639086663722992,-0.00587516650557518,0.3468381464481354,-0.08627746999263763,-0.12101804465055466,-0.1467868536710739,0.06366506218910217,-0.13177703320980072,-0.1659538894891739,-0.019850250333547592,0.10146526992321014,-0.04902762174606323,-0.1789015680551529,-0.0888887494802475,-0.06745899468660355,-0.1875922679901123,-0.17098675668239594,0.13897378742694855,-0.08429628610610962,-0.18510113656520844,-0.054552141577005386,0.04750359430909157,0.09386207163333893,-0.11498257517814636,0.12742967903614044,0.015051847323775291,-0.05134517699480057,-0.016744464635849,-0.052482813596725464,0.14734263718128204,0.0051413774490356445,0.07801852375268936,0.0850393995642662,-0.11213570833206177,0.2886947989463806,-0.031122742220759392,-0.03472002223134041,0.15314802527427673,0.1654093712568283,-0.06073815003037453,0.10895631462335587,-0.07099901139736176,0.19776283204555511,0.06763891130685806,0.06440558284521103,-0.05955258011817932,0.2507265508174896,-0.14271092414855957,0.02905135788023472,-0.11441265791654587,0.03224094957113266,-0.028522994369268417,-0.043993059545755386,0.10656911879777908,0.0916341170668602,-0.17866520583629608,0.1096746101975441,-0.14421015977859497,-0.1174890398979187,0.024050597101449966,-0.2638087868690491,0.1014476791024208,0.11915397644042969,-0.20461799204349518,-0.08003256469964981,0.12048988789319992,-0.02292989380657673,0.10162004828453064,0.12777960300445557,0.10656192153692245,-0.015984999015927315,-0.008143013343214989,0.16052423417568207,0.0501081645488739,-0.13123807311058044,-0.16176173090934753,0.06271396577358246,0.0708097591996193,-0.1325691193342209,0.0942080020904541,-0.05824906751513481,-0.0868258997797966,0.004717870615422726,-0.19127582013607025,0.16029949486255646,-0.17540888488292694,0.29680079221725464,0.03981746733188629,0.12584516406059265,0.0040051317773759365,-0.1616150140762329,-0.1071988120675087,-0.21517057716846466,-0.0041687628254294395,-0.13879768550395966,0.20849928259849548,-0.05735376849770546,0.0940907672047615,-0.06368560343980789,0.037586040794849396,0.07561426609754562,0.01817002333700657,0.020801637321710587,-0.08614100515842438,-0.06479225307703018,-0.1884562224149704,-0.14776989817619324,-0.06209591031074524,-0.08199217170476913,-0.12334805727005005,-0.25739583373069763,-0.10971513390541077,-0.09140707552433014,-0.0985376238822937,-0.13569828867912292,0.07297474145889282,-0.16958555579185486,-0.14102479815483093,-0.06799343973398209,-0.22801987826824188,-0.06268985569477081,-0.3212446868419647,-0.003349452745169401,-0.10339317470788956,-0.35572123527526855,-0.13923458755016327,0.13690592348575592,0.08303938806056976,-0.11470920592546463,-0.06670502573251724,0.07190228998661041,0.005979293491691351,-0.0946488231420517,-0.16878968477249146,0.013720499351620674,-0.17457488179206848,-0.11139896512031555,-0.13158142566680908,0.02892368659377098,0.007727110758423805,0.07172787189483643,0.041084274649620056,-0.009219407103955746,-0.06794819980859756,0.049060553312301636,-0.22209785878658295,-0.11024121940135956,-0.11870415508747101,-0.14979287981987,-0.0888144001364708,-0.05218740552663803,-0.09545350074768066,-0.02876552939414978,0.002063223160803318,0.06985726952552795,-0.11532382667064667,0.13401532173156738,-0.18319171667099,-0.07855194807052612,-0.06863715499639511,-0.1865387111902237,-0.041852258145809174,0.10683339834213257,0.07701361924409866,-0.07330122590065002,0.16594570875167847,0.04738021269440651,-0.06122357398271561,-0.03502439707517624,0.09652072191238403,-0.07397542148828506,-0.10049723088741302,-0.06711147725582123,-0.08964624255895615,0.0991700142621994,-0.0407693013548851,-0.1342175006866455,-0.23821178078651428,-0.03452053666114807,0.0407533124089241,0.25826311111450195,0.37116381525993347,-0.050593677908182144,-0.18135841190814972,0.043523937463760376,-0.21340681612491608,-0.04409977048635483,-0.06466840207576752,0.0580424964427948,0.025714106857776642,-0.06458760052919388,-0.1271655559539795,-0.05648687109351158,-0.09644906222820282,-0.07829676568508148,-0.1429123729467392,0.05738560110330582,0.05530178174376488,0.0574822872877121,-0.07466956973075867,0.00331194419413805,-0.008009100332856178,0.15159736573696136,-0.02902202680706978,0.03722136467695236,-0.016290578991174698,0.03892621770501137,0.12713052332401276,-0.2258863002061844,0.015188302844762802,-0.12903742492198944,0.22473222017288208,-0.16495810449123383,0.22367677092552185,-0.11763708293437958,0.20577894151210785,0.04278190806508064,0.04015213996171951,-0.06803926825523376,-0.24359898269176483,0.17035597562789917,-0.009217999875545502,0.12695112824440002,0.04979676380753517,0.14310966432094574,-0.1493985652923584,-0.047895487397909164,0.01929854229092598,-0.006520298309624195,-0.12668432295322418,-0.005027225241065025,0.1543930172920227,-0.1643298864364624,-0.0019869746174663305,0.044297102838754654,0.22284835577011108,0.1507715880870819,-0.027854906395077705,-0.018550261855125427,-0.027511613443493843,0.09186965227127075,0.1845148354768753,-0.08125577867031097,-0.22374111413955688,-0.13389207422733307,0.09316226094961166,-0.033276185393333435,0.0387859120965004,-0.2626647651195526,0.0008339507039636374,-0.041634444147348404,0.14275388419628143,-0.11996739357709885,0.01598276197910309,0.010572707280516624,0.0056536560878157616,-0.3960123062133789,-0.12798209488391876,-0.2156231552362442,-0.051651015877723694,-0.00686745997518301,0.1792166829109192,0.18732811510562897,0.05784982815384865,0.06873543560504913,0.03353090211749077,-0.0068030571565032005,-0.0223989374935627,0.10449845343828201,-0.17266426980495453,-0.08240560442209244,0.024304602295160294,0.007564511615782976,0.08176816254854202,0.033536795526742935,-0.08680412173271179,-0.016064053401350975,0.06365689635276794,-0.07801571488380432,0.01486190315335989,0.07004716992378235,0.13069355487823486,0.24314114451408386,-0.1879013478755951,-0.052716463804244995,0.020328300073742867,0.13503482937812805,-0.004007237963378429,-0.15511289238929749,-0.2294830083847046,-0.18463608622550964,0.0011304101208224893,-0.005804693326354027,-0.16149276494979858,-0.20278534293174744,0.10272921621799469,-0.024432716891169548,-0.009842603467404842,-0.14309385418891907,-0.05679226666688919,0.11837443709373474,-0.06484261900186539,0.181945338845253,-0.10624885559082031,-0.014189350418746471,-0.29294463992118835,0.1371583789587021,-0.07282022386789322,-0.11632871627807617,-0.14941082894802094,-0.2736539840698242,0.13514107465744019,0.0427371971309185,-0.020049922168254852,0.02111937291920185,-0.002468409016728401,-0.03306509181857109,0.12030267715454102,-0.12024626135826111,0.04766020551323891,-0.06675327569246292,0.17424696683883667,-0.0546695813536644,-0.12785115838050842,0.06307583302259445,0.014834287576377392,-0.02416319027543068,-0.2844916582107544,0.10672952979803085,0.02178961969912052,-0.1028962954878807,0.01921986974775791,0.1289392113685608,0.27070456743240356,0.18096350133419037,0.12005642801523209,-0.06518832594156265,-0.13132090866565704,0.1747322380542755,0.07022283971309662,0.21234244108200073,-0.012174541130661964,-0.1309075504541397,-0.2621600031852722,0.055707745254039764,0.09217016398906708,0.03567148745059967,0.025395212695002556,0.03951387479901314,-0.03560223430395126,0.07907035201787949,0.12452347576618195,0.11776367574930191,-0.14592961966991425,-0.001093873055651784,0.010909673757851124,-0.1686745434999466,-0.019306782633066177,0.08760705590248108,-0.13159993290901184,0.05157522112131119,-0.03625144436955452,0.0066693625412881374,-0.0103561757132411,-0.22030030190944672,0.05222124606370926,-0.02257433719933033,-0.06298104673624039,-0.08410049229860306,0.10196878015995026,0.06708642840385437,-0.16216740012168884,0.09786804765462875,-0.09970378130674362,0.04822291433811188,-0.21283620595932007,-5.169445648789406e-05,-0.028957931324839592,0.16599999368190765,-0.010176877491176128,-0.0820128470659256,0.001139674917794764,-0.12443801760673523,-0.053237590938806534,0.08103758096694946,0.028119131922721863,0.12680615484714508,0.3228372037410736,-0.005492935888469219,0.08002034574747086,-0.06877541542053223,-0.026290152221918106,-0.08590702712535858,0.02339583821594715,0.16557246446609497,0.12583118677139282,0.12750592827796936,-0.09682292491197586,-0.01771596446633339,-0.18444037437438965,-0.11114929616451263,0.03254200518131256,0.10647425800561905,0.1982741355895996,0.13558681309223175,-0.14342458546161652,-0.02068622037768364,-0.09974505007266998,0.04451334848999977,0.1067655012011528,0.2387184202671051,0.05741377919912338,0.011650501750409603,0.20597226917743683,-0.20965194702148438,0.15259435772895813,0.10291869193315506,-0.3711901903152466,-0.14614388346672058,-0.29631492495536804,0.17345164716243744,0.08394096791744232,-0.10912169516086578,-0.060772139579057693,-0.3190039098262787,-0.13388891518115997,-0.035747382789850235,0.019467327743768692,0.10299579799175262,-0.08439752459526062,-0.07620733231306076,-0.033262986689805984,-0.0972757488489151,0.02574019506573677,-0.012161070480942726,0.05843459814786911,0.023098070174455643,-0.021762879565358162,0.12434227764606476,0.054913949221372604,0.18655765056610107,-0.022512611001729965,-0.06776982545852661,0.06674906611442566,0.16223806142807007,0.04402093589305878,0.04964645206928253,-0.18307563662528992,-0.09492510557174683,0.024101603776216507,-0.11616131663322449,-0.052312497049570084,-0.13502153754234314,-0.21541418135166168,-0.16756758093833923,0.01703811064362526,0.11087533831596375,-0.0030539371073246002,0.15399789810180664,-0.1132621318101883,0.015540850348770618,-0.06878401339054108,0.1592797189950943,-0.05311187356710434,0.0606703981757164,0.050542183220386505,-0.14253024756908417,-0.15407933294773102,0.1539805829524994,-0.023021139204502106,-1.0319054126739502e-05,0.03548070415854454,-0.352505624294281,0.1074267327785492,0.09220030158758163,-0.016959570348262787,0.0936720222234726,0.04280290752649307,-0.13452328741550446,0.25363975763320923,0.125038281083107,-0.03717830777168274,-0.20108792185783386,-0.05476547032594681,0.03482967987656593,-0.12599299848079681,0.06366678327322006,0.06768392771482468,-0.04044682905077934,-0.004866482689976692,0.0706595629453659,0.08941346406936646,-0.04763542860746384,-0.07056526094675064,-0.18075262010097504,-0.013065368868410587,-0.021702930331230164,-0.2016301155090332,-0.10654602199792862,-0.22264575958251953,0.22412902116775513,-0.10620058327913284,-0.1653767228126526,-0.12443851679563522,-0.07519114017486572,0.05559570714831352,0.23728738725185394,0.09193900972604752,-0.01797645352780819,-0.08135195821523666,0.07640716433525085,-0.06987426429986954,0.20436696708202362,0.08396570384502411,0.023991236463189125,-0.0875331461429596,-0.04368458688259125,-0.05863972008228302,-0.09463931620121002,0.2647770643234253,-0.06169725954532623,0.02218695916235447,-0.11388788372278214,-0.20619642734527588,-0.22766225039958954,0.13922680914402008,-0.011245141737163067,0.08579382300376892,-0.1818646937608719,0.1374894082546234,0.020183252170681953,-0.09856976568698883,0.2123301476240158,0.0390312485396862,0.10463222116231918,-0.06062571704387665,-0.18174202740192413,-0.015302708372473717,-0.07075858116149902,-0.26373520493507385,-0.03733664005994797,0.027543434873223305,0.08872382342815399,-0.14822034537792206,-0.11208596080541611,-0.22573289275169373,0.11116112768650055,0.2199811041355133,0.12768962979316711,-0.011522877961397171,0.03466123342514038,0.08199805021286011,-0.14662164449691772,0.17115890979766846,-0.09734173119068146,0.08649122714996338,-0.012612950056791306,-0.000494047999382019,0.041087597608566284,-0.13820192217826843,-0.11431749165058136,0.06856979429721832,0.15077760815620422,0.05797622352838516,0.08225227892398834,-0.11824159324169159,0.06507543474435806,0.0194462351500988,0.019508272409439087,-0.0954517051577568,0.10807429999113083,0.029347196221351624,0.05888388678431511,-0.30248647928237915,-0.17065007984638214,0.010636435821652412,-0.09639760851860046,0.2452782392501831,0.14788293838500977,0.024272173643112183,-0.03582581505179405,-0.08865256607532501,-0.05782685428857803,-0.15898877382278442,0.09795637428760529,-0.04169074445962906,-0.17256130278110504,0.10211503505706787,0.13822820782661438,-0.08022775501012802,-0.06290124356746674,0.10730178654193878,0.13123159110546112,0.03731604665517807,-0.04077492281794548,-0.11689357459545135,-0.018919266760349274,-0.15642143785953522,0.007983382791280746,0.2538102865219116,-0.03310055285692215,0.021848462522029877,-0.28115758299827576,-0.06303586810827255,-0.07614192366600037,0.10963287204504013,0.03392460197210312,-0.2911434769630432,0.07318072021007538,-0.1417854279279709,-0.25263750553131104,0.10453169047832489,0.05683520436286926,-0.005396806634962559,-0.012958366423845291,0.07106403261423111,-0.24546706676483154,0.19183672964572906,0.09938417375087738,0.20425960421562195,-0.08647190034389496,0.032696761190891266,-0.09956620633602142,0.030224226415157318,0.06546671688556671,-0.05033997446298599,0.25426530838012695,0.14362786710262299,0.04043599218130112,0.01988014206290245,0.1614713817834854,-0.03692356497049332,0.05160505324602127,0.042727719992399216,0.057053226977586746,-0.34955278038978577,-0.2553617060184479,0.22222764790058136,0.08984958380460739,-0.015803944319486618,-0.03798587992787361,-0.068284772336483,0.038859836757183075,-0.23542247712612152,-0.018797222524881363,0.08816452324390411,-0.05608104169368744,0.1028580293059349,0.11983968317508698,0.05674834921956062,-0.06592561304569244,0.01780397817492485,0.23115941882133484,-0.1416793316602707,0.09286702424287796,0.07394346594810486,-0.07272360473871231,0.015712972730398178,-0.10044068843126297,0.21584436297416687,-0.008030712604522705,0.004350632429122925,0.09486745297908783,-0.2643287181854248,-0.18965375423431396,-0.07106223702430725,0.00417433213442564,0.07762650400400162,-0.03896874189376831,0.12065113335847855,-0.07417327165603638,-0.1256457418203354,-0.05740451067686081,-0.007553222123533487,0.1203078180551529,-0.005201111547648907,-0.07233089953660965,0.1302647441625595,-0.1215532198548317,0.005818209145218134,0.10810541361570358,0.03605177253484726,0.0494220107793808,-0.02004101313650608,-0.026592804118990898,0.020666781812906265,0.13779225945472717,0.1205078735947609,-0.013930113054811954,-0.23773899674415588,-0.37040141224861145,0.14684851467609406,-0.2447848916053772,0.030299648642539978,0.10403813421726227,-0.1926289200782776,-0.17272542417049408,0.13432450592517853,0.059970539063215256,-0.06347033381462097,-0.07951891422271729,-0.06092609837651253,-0.19643190503120422,-0.05997529625892639,-0.05362812802195549,-0.010271161794662476,-0.045298948884010315,-0.05525142326951027,0.012743519619107246,-0.19331979751586914,0.11647342145442963,-0.061634425073862076,0.00243949331343174,-0.19673742353916168,-0.04073396697640419,0.1454179733991623,-0.094675213098526,-0.1770663559436798,0.264524906873703,0.09868816286325455,0.06275538355112076,0.2802879214286804,0.1621202975511551,0.039982423186302185,0.018349559977650642,-0.06729535013437271,0.07437346130609512,-0.017751077190041542,-0.15411974489688873,0.036680497229099274,-0.12041404098272324,0.09329184889793396,-0.12187345325946808,0.12067533284425735,0.010256579145789146,0.09308985620737076,-0.1349489986896515,-0.1004103496670723,-0.010967858135700226,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,1.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,-0.1686985194683075,-0.17831285297870636,-0.20477434992790222,0.0139828622341156,0.04139140248298645,0.0691559910774231,-0.058561161160469055,-0.14611567556858063,0.054921120405197144,-0.04372157156467438,0.17896965146064758,-0.19720785319805145,-0.06192578375339508,-0.10574229061603546,-0.04946222901344299,0.08914870023727417,-0.02052217721939087,-0.08391463756561279,-0.16170062124729156,0.08099699020385742,-0.07204538583755493,0.16911199688911438,-0.2123761624097824,0.20431897044181824,0.15171146392822266,-0.060489654541015625,-0.1314924657344818,-0.22498242557048798,0.19093474745750427,-0.11908519268035889,0.029523760080337524,0.12791168689727783,0.20047134160995483,0.11500367522239685,-0.13882675766944885,-0.0008269697427749634,0.04479500651359558,0.13344645500183105,-0.06630633771419525,-0.07508648931980133,-0.21116968989372253,0.007775589823722839,-0.05445536971092224,-0.19111408293247223,0.006026670336723328,-0.2252778708934784,0.17638540267944336,-0.009594306349754333,-0.15744952857494354,-0.18314635753631592,0.08906823396682739,-0.07374414801597595,-0.11166349053382874,0.14228346943855286,0.19088628888130188,-0.05926127731800079,0.05023866891860962,0.06981471180915833,-0.17608952522277832,0.06899198889732361,0.0980425775051117,0.22271251678466797,0.1696738302707672,-0.06361831724643707,-0.0933484137058258,0.031997084617614746,0.1754741072654724,-0.15144553780555725,0.16772529482841492,0.13856390118598938,-0.1147722378373146,-0.21563412249088287,0.0822138786315918,0.14058145880699158,-0.10101071000099182,-0.012804925441741943,0.18818044662475586,0.19407549500465393,0.17401447892189026,-0.10473856329917908,-0.1468096673488617,-0.03084707260131836,-0.18905679881572723,0.1116034984588623,-0.013153687119483948,0.05350780487060547,-0.009170234203338623,0.21371442079544067,0.22297558188438416,0.2234487235546112,-0.025171473622322083,-0.012465059757232666,-0.18092097342014313,-0.11417300254106522,0.024055570363998413,0.09586381912231445,-0.02327968180179596,0.008844643831253052,0.19999223947525024,0.20985263586044312,-0.09423178434371948,-0.09292593598365784,-0.13994619250297546,0.03653287887573242,-0.12970349192619324,0.11166641116142273,-0.2119847983121872,-0.23042602837085724,0.05364987254142761,0.2139456868171692,0.047241002321243286,0.17737501859664917,-0.19368737936019897,0.06184130907058716,-0.20880244672298431,0.10667389631271362,-0.0705556720495224,0.062461286783218384,0.14043551683425903,-0.22778600454330444,-0.09485182166099548,0.07236573100090027,0.19786804914474487,-0.06919755041599274,-0.0689675509929657,-0.22385531663894653,-0.15214765071868896,0.21963539719581604,-0.03966589272022247,-0.19650177657604218,-0.11324945837259293,0.07282662391662598,-0.22443440556526184,0.09816905856132507,0.13917797803878784,0.22953221201896667,0.040857523679733276,0.14476242661476135,-0.19668106734752655,-0.1623295396566391,0.06610763072967529,0.07855099439620972,0.22508028149604797,0.09195864200592041,-0.08783897757530212,0.19642364978790283,-0.08880232274532318,-0.2095855474472046,0.23031765222549438,-0.15206879377365112,-0.15819086134433746,0.11227673292160034,0.15584072470664978,0.09087514877319336,-0.22136324644088745,-0.07358179986476898,0.20191043615341187,0.0741066038608551,0.23140129446983337,-0.2119259238243103,0.21657946705818176,0.1052619218826294,0.22909578680992126,0.13630488514900208,-0.18659204244613647,-0.03478631377220154,-0.20645076036453247,-0.1623266190290451,-0.10311484336853027,-0.16781535744667053,-0.19049100577831268,0.07490938901901245,-0.18935009837150574,-0.18708433210849762,-0.07958170771598816,-0.09316179156303406,0.15714624524116516,-0.15663540363311768,-0.135265052318573,-0.04070426523685455,0.1602686047554016,0.017500191926956177,-0.23142538964748383,-0.00038191676139831543,-0.18681393563747406,0.04159587621688843,-0.16596180200576782,0.13679909706115723,0.0042093247175216675,0.1636585295200348,0.14342808723449707,-0.05418260395526886,-0.16305166482925415,0.16586214303970337,0.05049392580986023,0.02397698163986206,0.18423566222190857,-0.1842581331729889,0.1585802435874939,0.2049110233783722,0.1917480230331421,-0.18202298879623413,0.043065011501312256,0.03929808735847473,0.07505932450294495,0.2101948857307434,-0.01606421172618866,-0.08581706881523132,-0.06909447908401489,-0.032712534070014954,0.2177647352218628,0.1425064206123352,-0.20100246369838715,0.09394758939743042,-0.1988733857870102,0.14073094725608826,0.19958597421646118,0.0907769501209259,-0.16445845365524292,0.06987956166267395,-0.2122470885515213,0.028215378522872925,-0.05101993680000305,0.020935624837875366,0.05736324191093445,0.17268940806388855,0.20941060781478882,0.10699588060379028,-0.025014862418174744,0.22232016921043396,-0.17515014111995697,0.22765770554542542,0.05079549551010132,-0.11132913827896118,-0.11981553584337234,0.1973145604133606,-0.0695788711309433,0.10956370830535889,-0.16461335122585297,-0.015239328145980835,0.14848175644874573,0.15254849195480347,-0.16841304302215576,-0.1253127157688141,0.16083693504333496,-0.024523630738258362,0.01195913553237915,0.14567145705223083,0.1687287986278534,-0.07786379754543304,0.1481911838054657,-0.1449042409658432,0.05055221915245056,-0.16996943950653076,-0.00614205002784729,0.039502888917922974,0.16653373837471008,0.11671507358551025,-0.19936656951904297,-0.15446963906288147,-0.05650734901428223,-0.10088992118835449,-0.17241168022155762,-0.005600377917289734,-0.2226903885602951,-0.026200860738754272,0.035215526819229126,0.07060053944587708,-0.007638618350028992,0.1132737398147583,0.18904587626457214,0.22194933891296387,0.14639315009117126,-0.12662354111671448,0.15778151154518127,0.071086585521698,-0.10343970358371735,0.04156580567359924,-0.05403757095336914,0.1711519956588745,-0.04351337254047394,-0.05835676193237305,0.20915165543556213,0.21717140078544617,0.16491791605949402,-0.12040527909994125,0.02153715491294861,-0.05683735013008118,0.04927939176559448,-0.17887648940086365,0.030317872762680054,0.002724170684814453,0.18004760146141052,0.048621416091918945,-0.046851396560668945,-0.181635320186615,-0.14594489336013794,0.1948336362838745,-0.1661997139453888,-0.11744917184114456,-0.22527727484703064,0.01488274335861206,0.05141797661781311,0.03294447064399719,0.018127337098121643,-0.020492494106292725,-0.21738110482692719,-0.20036542415618896,-0.007642656564712524,-0.030374422669410706,0.19116833806037903,0.21428030729293823,-0.19214622676372528,0.20298421382904053,-0.12365115433931351,-0.13724100589752197,0.20238590240478516,0.14945745468139648,-0.2211034893989563,0.12030947208404541,0.21861279010772705,0.039671897888183594,0.19997450709342957,-0.11185497790575027,0.07068601250648499,-0.10280890762805939,-0.09976477921009064,0.11365306377410889,0.14739343523979187,0.0689898431301117,-0.017715901136398315,-0.007028296589851379,0.21952873468399048,0.0002199113368988037,-0.19080714881420135,-0.16873200237751007,-0.1805058866739273,-0.13604392111301422,0.009681940078735352,0.17241880297660828,0.07877078652381897,0.17524108290672302,0.03015357255935669,0.1525670886039734,0.02761271595954895,0.13163450360298157,-0.23132291436195374,0.09284546971321106,-0.19225294888019562,0.0592169463634491,-0.21592897176742554,0.1465250849723816,-0.05915939807891846,-0.18113790452480316,0.10134384036064148,0.011662691831588745,0.19187992811203003,0.10577958822250366,0.16413304209709167,0.17194566130638123,0.015657126903533936,-0.19503268599510193,-0.06245356798171997,-0.05011951923370361,0.1727515459060669,0.07616168260574341,0.2305985987186432,-0.08820386230945587,0.2272450029850006,0.07320892810821533,0.20283207297325134,-0.17395994067192078,0.13928616046905518,-0.021046802401542664,-0.204704150557518,0.06438145041465759,0.1859036386013031,-0.10108333826065063,-0.13760516047477722,-0.01674136519432068,0.07409656047821045,-0.14840102195739746,-0.045816823840141296,-0.04284907877445221,0.019888341426849365,0.16651293635368347,0.16126742959022522,0.06235286593437195,0.11623877286911011,-0.0820922702550888,-0.10475759208202362,-0.16829434037208557,-0.0702485740184784,-0.05615268647670746,0.12366759777069092,0.062356382608413696,-0.1758480966091156,0.005704283714294434,-0.0496944934129715,-0.2205381989479065,-0.08198481798171997,0.07547265291213989,0.03965070843696594,-0.2150494009256363,-0.05444300174713135,0.06208482384681702,0.2205023169517517,0.08444628119468689,-0.22215522825717926,-0.04143980145454407,-0.17540889978408813,-0.12357793003320694,0.10151028633117676,-0.21317052841186523,-0.16612157225608826,0.06210067868232727,0.18581494688987732,0.18716245889663696,0.055928707122802734,0.09606850147247314,0.21158185601234436,0.002648964524269104,0.1811564564704895,0.0028179287910461426,0.12493351101875305,-0.15224504470825195,0.10896000266075134,0.16135063767433167,0.01235109567642212,-0.03615497052669525,0.03663405776023865,-0.032908931374549866,0.17344138026237488,-0.07547193765640259,0.016121596097946167,0.021764397621154785,0.17730265855789185,0.1794145405292511,-0.11635793000459671,0.1968182623386383,-0.19210131466388702,-0.05075550079345703,0.10607695579528809,0.19258034229278564,-0.15880504250526428,-0.2085345834493637,-0.07113514840602875,0.01677580177783966,-0.20073284208774567,0.0387597382068634,-0.05989466607570648,0.1940857470035553,0.0922277569770813,-0.2270316481590271,-0.1536455899477005,0.08467665314674377,0.20903587341308594,0.011307090520858765,0.22357520461082458,0.07701337337493896,0.09730356931686401,-0.1217871755361557,-0.13662151992321014,0.018393322825431824,-0.10676797479391098,-0.0507889986038208,0.16418305039405823,-0.09765160083770752,0.0038290023803710938,0.10359075665473938,-0.018138766288757324,-0.021394357085227966,-0.0035825520753860474,0.1490267515182495,0.01930224895477295,-0.19887471199035645,-0.0907188355922699,-0.07975608110427856,-0.12453000247478485,0.08692675828933716,-0.12793822586536407,-0.15298035740852356,-0.12492726743221283,0.05752044916152954,-0.04543396830558777,-0.012065574526786804,-0.11729477345943451,-0.028016328811645508,0.01086936891078949,-0.22022083401679993,-0.22607527673244476,0.107267826795578,0.19196158647537231,-0.09684063494205475,-0.10406824946403503,-0.06849683821201324,-0.13046103715896606,-0.0441853404045105,0.22803086042404175,-0.14762189984321594,-0.0950154960155487,-0.08228307962417603,0.22296372056007385,0.20871981978416443,-0.20322315394878387,-0.03166046738624573,0.21654194593429565,-0.16400253772735596,-0.06354652345180511,-0.13099786639213562,0.06857085227966309,0.015007555484771729,-0.2181437462568283,0.21416541934013367,-0.1270606517791748,0.0995834469795227,0.13227087259292603,-0.11163121461868286,-0.20388412475585938,0.061680227518081665,0.05487173795700073,-0.19803515076637268,0.037991076707839966,-0.06847283244132996,0.061642080545425415,-0.07182885706424713,0.13281717896461487,-0.00657905638217926,-0.13450628519058228,-0.16959616541862488,0.17914408445358276,0.13003382086753845,0.08704501390457153,0.1352941393852234,0.20269283652305603,0.002395838499069214,0.19808748364448547,0.12881773710250854,-0.20444226264953613,0.03232073783874512,0.18751254677772522,0.17399632930755615,-0.15668624639511108,-0.2059299349784851,-0.17950022220611572,0.012449607253074646,0.056220024824142456,-0.2100355178117752,0.01971524953842163,-0.17878323793411255,0.10203617811203003,0.20153409242630005,-0.046157583594322205,0.00714169442653656,-0.09051840007305145,0.1295183300971985,0.005480900406837463,-0.16221465170383453,0.14585715532302856,0.19406592845916748,0.13957750797271729,-0.2054506242275238,-0.08266285061836243,0.1742081642150879,-0.20981676876544952,0.18952089548110962,0.05102121829986572,-0.0055539608001708984,0.04346960783004761,0.2074587345123291,0.10106152296066284,-0.14991790056228638,0.17464101314544678,0.21444573998451233,-0.1492663025856018,-0.22288253903388977,-0.17579881846904755,0.012455180287361145,0.11225882172584534,0.17315521836280823,-0.19097568094730377,0.08482250571250916,-0.05223706364631653,0.028099775314331055,0.006274983286857605,-0.19468973577022552,0.1548449993133545,-0.218934565782547,0.1637323498725891,-0.04477667808532715,-0.06179820001125336,-0.05857071280479431,0.028234809637069702,0.1530500054359436,-0.1296069622039795,0.020523905754089355,-0.2089526504278183,-0.08323074877262115,-0.17507818341255188,-0.12271955609321594,-0.2208852916955948,-0.03684459626674652,0.08052980899810791,0.20403429865837097,0.09356671571731567,0.20754796266555786,-0.005993112921714783,0.185960590839386,-0.14342129230499268,0.17841759324073792,-0.060125768184661865,-0.09002457559108734,-0.13551968336105347,0.19987517595291138,-0.14984716475009918,0.12391847372055054,-0.0037318766117095947,0.16276875138282776,-0.22144590318202972,-0.22704754769802094,0.1850396692752838,-0.20878909528255463,0.03360462188720703,-0.02437765896320343,-0.004045695066452026,-0.11186353117227554,0.21564599871635437,0.22124171257019043,-0.21853289008140564,-0.008269533514976501,0.16674214601516724,-0.0924886018037796,-0.2100524604320526,0.11749899387359619,-0.19558000564575195,0.16697674989700317,-0.03902052342891693,-0.07777661085128784,0.08220517635345459,0.09073600172996521,-0.1926710158586502,-0.03075578808784485,0.028335899114608765,-0.15149179100990295,-0.031174957752227783,0.12476590275764465,0.2271392047405243,-0.13348734378814697,-0.06306256353855133,-0.2247789055109024,0.09623995423316956,0.20854699611663818,0.12340906262397766,-0.18085768818855286,-0.04101032018661499,-0.15313515067100525,-0.11483961343765259,-0.21224355697631836,0.21877574920654297,-0.16521474719047546,-0.11858699470758438,0.10161486268043518,-0.09267495572566986,-0.12460064142942429,0.08279374241828918,0.02614453434944153,-0.17982017993927002,0.01577344536781311,0.09235665202140808,-0.1898256093263626,-0.16058850288391113,-0.028951629996299744,0.152084618806839,0.21054396033287048,-0.15280117094516754,0.12184745073318481,0.03444632887840271,-0.18279483914375305,-0.06869776546955109,0.08648109436035156,-0.10318443179130554,0.18898168206214905,-0.11990576237440109,-0.07261312007904053,-0.028793975710868835,-0.13626062870025635,-0.1153160110116005,0.18755996227264404,-0.18873772025108337,-0.0855294018983841,-0.0012421756982803345,0.2037367820739746,-0.0852925032377243,-0.17444998025894165,0.00633634626865387,0.1922544538974762,0.10980480909347534,0.03575772047042847,-0.02774631977081299,0.204013854265213,-0.12733452022075653,-0.2054094523191452,0.11338669061660767,0.21490266919136047,0.07511615753173828,0.15869060158729553,0.04974013566970825,0.12551972270011902,0.1982669234275818,-0.10700526088476181,-0.08727650344371796,-0.23051807284355164,0.02946522831916809,0.11292973160743713,-0.002942204475402832,0.07259783148765564,-0.06537197530269623,-0.016295313835144043,0.08940359950065613,-0.10175800323486328,0.13562050461769104,0.07215261459350586,-0.1768939346075058,0.20655715465545654,0.058600395917892456,-0.09635667502880096,0.004055514931678772,-0.1368282437324524,-0.11771609634160995,-0.17496737837791443,0.17767158150672913,-0.06855246424674988,0.22735878825187683,0.014528796076774597,-0.22434236109256744,0.15279310941696167,0.015683889389038086,0.228450745344162,-0.13972321152687073,-0.171921044588089,-0.006560236215591431,-0.2042614221572876,0.037088990211486816,-0.052904337644577026,-0.14839640259742737,-0.01106157898902893,0.11638534069061279,-0.1730775237083435,0.0655527114868164,0.13217943906784058,0.04585546255111694,0.18776828050613403,-0.05485500395298004,0.11577972769737244,-0.10712594538927078,-0.12108254432678223,-0.06668473780155182,-0.03299605846405029,-0.10183675587177277,-0.1823197603225708,0.13878944516181946,0.0748467743396759,0.21774756908416748,-0.18753518164157867,0.04075354337692261,0.13669782876968384,0.15853974223136902,-0.0654945969581604,0.15600913763046265,-0.15791666507720947,0.11498713493347168,0.16521313786506653,-0.19069060683250427,0.06023746728897095,-0.0492558479309082,0.18701225519180298,0.18143588304519653,0.020091861486434937,0.21828842163085938,0.1590491235256195,-0.07093124091625214,-0.0738481730222702,-0.16854003071784973,0.11638712882995605,0.08664262294769287,0.20576494932174683,0.1784469485282898,-0.18827137351036072,0.15519839525222778,0.056642234325408936,0.11051920056343079,0.18728330731391907,-0.20464621484279633,-0.052725598216056824,0.027305245399475098,-0.03271467983722687,0.07321655750274658,0.22352460026741028,-0.023906901478767395,-0.17301350831985474,-0.14367040991783142,-0.03547030687332153,0.14692366123199463,0.15020310878753662,-0.08856850862503052,-0.18477033078670502,0.04603821039199829,-0.08002647757530212,-0.17034517228603363,0.17185166478157043,-0.041795238852500916,0.06513199210166931,-0.06411987543106079,0.2063555121421814,0.23141971230506897,0.14431118965148926,0.13009262084960938,0.12636208534240723,0.001467868685722351,-0.1379861980676651,0.21573808789253235,-0.18870919942855835,0.1990206241607666,-0.0521068274974823,-0.05367878079414368,0.10262706875801086,0.08416137099266052,0.07758072018623352,0.16390177607536316,-0.068060502409935,-0.001125246286392212,-0.20560391247272491,-0.23019233345985413,-0.0015478283166885376,0.0946337878704071,-0.0759982168674469,-0.22842884063720703,0.09737220406532288,0.1593356430530548,0.08338707685470581,0.21301618218421936,0.023303180932998657,-0.21493461728096008,0.12628257274627686,-0.17482846975326538,0.09915915131568909,-0.0947820246219635,0.07905972003936768,0.11711323261260986,0.22579863667488098,-0.05440415441989899,-0.1394306719303131,-0.1929956078529358,-0.10180932283401489,0.2283208966255188,0.02013307809829712,-0.018674761056900024,-0.20338395237922668,-0.22777144610881805,0.031212717294692993,0.07933041453361511,0.107596755027771,0.19854968786239624,-0.04138827323913574,0.16333216428756714,0.21045854687690735,0.08089163899421692,-0.0445706844329834,0.1504005491733551,0.1850397288799286,0.030029296875,0.18163934350013733,0.17286700010299683,-0.18283411860466003,0.030286580324172974,0.06374290585517883,0.22968420386314392,-0.07261985540390015,0.0739409327507019,-0.20035213232040405,-0.09225639700889587,0.002493724226951599,0.013755068182945251,-0.22568799555301666,0.1791861355304718,-0.1441570520401001,-0.14556483924388885,-0.11398421972990036,-0.044115036725997925,0.05279776453971863,0.21473821997642517,0.2171066701412201,0.04148060083389282,-0.07934242486953735,0.10215890407562256,0.07592377066612244,-0.09258997440338135,0.1929815411567688,0.07553225755691528,-0.08471617102622986,0.19641613960266113,-0.2291020154953003,0.05246850848197937,0.16310027241706848,0.08823812007904053,0.17966672778129578,-0.07500188052654266,-0.209075927734375,0.13825112581253052,0.16865330934524536,-0.07847683131694794,0.18844902515411377,-0.09222698211669922,-0.014411911368370056,0.19298803806304932,0.08206859230995178,-0.052342236042022705,0.08031752705574036,-0.1386595368385315,0.028452068567276,0.026102423667907715,-0.039845287799835205,-0.12159282714128494,-0.17384135723114014,-0.22281605005264282,0.132528156042099,-0.09388595819473267,0.1739971935749054,0.09075117111206055,0.00784042477607727,-0.19800910353660583,-0.08029168844223022,-0.22323566675186157,-0.017976969480514526,-0.10286812484264374,0.044081658124923706,0.10413539409637451,-0.03315240144729614,-0.18272265791893005,0.1375274658203125,0.18515318632125854,-0.011707663536071777,-0.02223224937915802,-0.07060582935810089,0.0426519513130188,0.06908378005027771,0.008728653192520142,-0.14063063263893127,-0.22278718650341034,-0.06742562353610992,0.2159765362739563,-0.21349555253982544,0.17231091856956482,-0.07010647654533386,0.1531463861465454,0.11067548394203186,0.02133205533027649,-0.09351606667041779,0.06433311104774475,0.1156112551689148,0.029995381832122803,-0.044873133301734924,-0.13694219291210175,-0.21074163913726807,-0.21262095868587494,-0.03789433836936951,0.0731489360332489,-0.025397613644599915,-0.03539310395717621,0.15745636820793152,0.18444061279296875,0.19434738159179688,-0.13830411434173584,0.09659841656684875,0.07204329967498779,-0.03450191020965576,0.20627465844154358,-0.0951678603887558,-0.021430715918540955,0.147099107503891,0.04056665301322937,0.04025369882583618,-0.0631142109632492,0.2199491262435913,0.1401086151599884,0.034695208072662354,-0.07226860523223877,-0.13073855638504028,-0.13251550495624542,-0.11205976456403732,0.1252654790878296,-0.21055097877979279,-0.2075619250535965,-0.014728769659996033,-0.20392043888568878,0.2241222858428955,0.03526487946510315,0.14768078923225403,-0.062000617384910583,0.07862752676010132,-0.08801810443401337,-0.03129090368747711,-0.11773446947336197,-0.14854103326797485,0.015871450304985046,0.10122808814048767,0.22915202379226685,-0.021300598978996277,0.1941116750240326,0.2080157995223999,-0.19797517359256744,0.054330915212631226,-0.031789153814315796,-0.1801476925611496,0.032642513513565063,0.007172107696533203,-0.205726757645607,0.03674191236495972,0.1888141632080078,0.0960170328617096,-0.14687737822532654,-0.12121984362602234,0.16450226306915283,0.027120500802993774,-0.20596393942832947,0.04761630296707153,-0.1078609898686409,0.2161308228969574,0.18255996704101562,-0.1979505568742752,0.1861775517463684,-0.19743162393569946,-0.1722354292869568,0.15036892890930176,-0.06713426113128662,-0.07031220197677612,0.038335323333740234,0.14937666058540344,-0.05978170037269592,0.18358096480369568,-0.1946832239627838,0.03364109992980957,-0.17621567845344543,0.13119933009147644,0.0580405592918396,-0.02760736644268036,0.060164451599121094,0.02680438756942749,-0.133898064494133,0.04991897940635681,0.1950646936893463,-0.2118922621011734,-0.03437244892120361,0.030314773321151733,-0.06808097660541534,-0.060600847005844116,0.10187426209449768,0.19922006130218506,0.14658209681510925,-0.11097276210784912,-0.15442775189876556,-0.08602626621723175,-0.03828321397304535,-0.003105372190475464,-0.012835830450057983,0.09218999743461609,-0.13708241283893585,0.0684259831905365,-0.07132138311862946,-0.05243362486362457,-0.12039314210414886,0.06018471717834473,0.07039287686347961,-0.047331660985946655,-0.22983618080615997,0.181073397397995,0.024620264768600464,-0.09362472593784332,-0.08423678576946259,0.09435677528381348,0.15227815508842468,-0.219241663813591,-0.003580063581466675,0.020648658275604248,0.206445574760437,-0.19566762447357178,0.06834343075752258,0.04500165581703186,-0.2160719484090805,-0.1898190975189209,0.04478263854980469,0.13149362802505493,-0.012742727994918823,-0.04810163378715515,-0.1582750678062439,-0.11565373092889786,-0.15935605764389038,-0.0677649974822998,-0.14181101322174072,-0.12980562448501587,0.16056782007217407,0.020825296640396118,0.15968537330627441,0.21295714378356934,-0.02850686013698578,-0.04032565653324127,-0.05208265781402588,-0.2165934294462204,0.012821584939956665,-0.09086191654205322,-0.021229296922683716,0.09923723340034485,-0.14723798632621765,0.05696752667427063,0.1794441044330597,-0.18749715387821198,-0.1508139669895172,-0.10567650198936462,0.028227418661117554,0.05971845984458923,0.06272545456886292,0.06593883037567139,-0.0904095321893692,0.06907317042350769,0.10479480028152466,-0.008273616433143616,-0.12301699072122574,-0.017236024141311646,-0.1443978250026703,-0.048442989587783813,0.2294105887413025,-0.13326124846935272,-0.06121590733528137,0.029911816120147705,-0.14883261919021606,-0.16927219927310944,0.02893000841140747,-0.2275029718875885,0.07971352338790894,-0.023799732327461243,-0.18394601345062256,0.1310705840587616,0.011942744255065918,-0.014942660927772522,-0.015378385782241821,-0.026638463139533997,0.2017291784286499,0.2311033010482788,0.1506870985031128,0.21229344606399536,-0.04236871004104614,-0.16693347692489624,0.09019944071769714,-0.07540859282016754,-0.1733236312866211,0.11984863877296448,0.21950912475585938,0.02413448691368103,0.16348004341125488,0.18634679913520813,-0.04353572428226471,-0.2187579870223999,-0.17170488834381104,0.21009600162506104,-0.00043147802352905273,0.11442622542381287,0.11407884955406189,-0.03679189085960388,-0.09860621392726898,-0.08249378204345703,-0.06419387459754944,0.05825313925743103,0.2038416862487793,-0.1596653014421463,0.10535496473312378,0.11080965399742126,0.10384264588356018,-0.11451050639152527,0.03257307410240173,-0.07370993494987488,0.12450605630874634,-0.027051568031311035,0.21053454279899597,0.002111971378326416,-0.178115576505661,-0.13770675659179688,-0.18474799394607544,0.10050749778747559,-0.13144506514072418,0.05226844549179077,0.18237528204917908,0.1389336884021759,0.16842591762542725,-0.08110299706459045,0.010496169328689575,0.030011415481567383,0.22224590182304382,-0.06548598408699036,0.002233654260635376,0.21797233819961548,0.21912863850593567,0.16758403182029724,0.16652047634124756,-0.22481538355350494,0.10662731528282166,0.00021891295909881592,0.21889808773994446,0.02958884835243225,0.14883211255073547,-0.011104673147201538,-0.13713720440864563,0.1557321846485138,0.2231256663799286,0.04819291830062866,-0.180006206035614,0.09103143215179443,-0.00846940279006958,-0.07093626260757446,0.18200230598449707,0.21682673692703247,-0.09904448688030243,0.18928205966949463,-0.01619228720664978,-0.061043739318847656,-0.10660601407289505,-0.02581898868083954,-0.21410571038722992,0.193584144115448,-0.055611178278923035,-0.15851151943206787,-0.06037674844264984,-0.15770912170410156,0.11614707112312317,-0.21649834513664246,0.21183431148529053,0.21446716785430908,0.051324278116226196,0.15295204520225525,-0.15315236151218414,0.09211921691894531,-0.02375061810016632,0.04595562815666199,0.11786234378814697,-0.22217051684856415,0.03013664484024048,-0.02454078197479248,0.22117877006530762,0.037821173667907715,0.17204979062080383,-0.040934279561042786,-0.21191196143627167,0.10241523385047913,0.113976389169693,0.07929673790931702,0.1400253176689148,-0.10321080684661865,0.10256975889205933,-0.041584938764572144,0.15095442533493042,0.08204171061515808,-0.15638703107833862,-0.12252525240182877,0.11912602186203003,-0.021005704998970032,0.07312572002410889,-0.15605692565441132,0.08930778503417969,0.1070229709148407,0.049312859773635864,0.11551538109779358,0.01909846067428589,0.17394191026687622,0.09250378608703613,-0.1860208362340927,0.1399463713169098,-0.1367560625076294,0.1923370063304901,0.09034588932991028,-0.1464870572090149,0.15633267164230347,0.061149537563323975,0.22382712364196777,0.06851312518119812,0.03172332048416138,-0.11895429342985153,-0.08478327095508575,-0.14311961829662323,-0.1082649827003479,0.17370179295539856,0.21076133847236633,0.12274554371833801,-0.0036383867263793945,-0.10968191921710968,0.031192690134048462,0.004577219486236572,-0.2291461080312729,-0.055820658802986145,0.07873895764350891,-0.06615442037582397,-0.04467928409576416,-0.22840367257595062,0.0716409981250763,-0.1371234655380249,-0.03721173107624054,0.018764108419418335,-0.19755180180072784,0.19375306367874146,-0.10567805171012878,0.15180838108062744,-0.18200941383838654,-0.17449522018432617,-0.17650477588176727,0.16770735383033752,0.11360776424407959,-0.17223188281059265,-0.18482926487922668,0.01655842363834381,0.06105664372444153,0.01929798722267151,-0.1584187150001526,-0.1935594081878662,-0.19536235928535461,0.17174318432807922,-0.22133322060108185,-0.19077862799167633,0.06611236929893494,0.054637789726257324,-0.030739784240722656,-0.06215800344944,-0.07744434475898743,0.20708581805229187,-0.0025688260793685913,0.20502173900604248,0.004201099276542664,0.005070120096206665,-0.028906553983688354,0.1354745328426361,-0.05448786914348602,-0.11744304746389389,0.13823732733726501,-0.1594633311033249,0.054414600133895874,0.17854809761047363,0.06941470503807068,-0.16708704829216003,0.17673444747924805,0.07296440005302429,-0.09812137484550476,0.09150409698486328,-0.2057134509086609,0.09887948632240295,0.040074288845062256,-0.007584989070892334,-0.06531669199466705,0.01076844334602356,-0.025736168026924133,-0.09120339155197144,0.2234034240245819,-0.2248990386724472,0.089834064245224,0.19981521368026733,-0.18276751041412354,-0.0745297372341156,0.13906386494636536,0.11771422624588013,-0.054813891649246216,-0.15864640474319458,0.17370831966400146,-0.14940574765205383,-0.10857875645160675,-0.11282515525817871,-0.038233935832977295,-0.10609501600265503,-0.18684880435466766,-0.22146229445934296,-0.07503300905227661,-0.198177307844162,-0.19744358956813812,0.1752561330795288,-0.04650694131851196,-0.17841069400310516,-0.18966276943683624,0.04907792806625366,-0.11557890474796295,-0.22196848690509796,-0.15428251028060913,0.14268246293067932,0.1830386221408844,0.05579036474227905,-0.10134269297122955,-0.14867137372493744,0.08131599426269531,0.14300251007080078,-0.17111283540725708,-0.22260893881320953,-0.10484544932842255,0.0631914734840393,-0.12820962071418762,-0.1997288465499878,-0.05955302715301514,0.08123117685317993,-0.1907874494791031,-0.1940472424030304,0.020815759897232056,-0.08798141777515411,0.05263295769691467,-0.12218289822340012,-0.008457258343696594,0.1428222954273224,-0.15130290389060974,-0.19897206127643585,-0.07382737100124359,0.11734813451766968,0.017995119094848633,0.12429144978523254,0.23007306456565857,-0.02013738453388214,0.04055136442184448,-0.120517797768116,0.10649806261062622,-0.1684492528438568,-0.12924998998641968,-0.09207810461521149,-0.0723738968372345,0.10896563529968262,0.062037646770477295,-0.17923805117607117,0.11246469616889954,-0.11555556207895279,-0.08147084712982178,0.20340287685394287,0.14186209440231323,0.2042255997657776,-0.17681998014450073,-0.22453980147838593,-0.09788249433040619,-0.15917742252349854,-0.027149900794029236,-0.17029015719890594,0.10124778747558594,0.021380603313446045,0.10089460015296936,0.06546518206596375,-0.12592889368534088,-0.15980878472328186,-0.005493491888046265,0.07364875078201294,-0.14438888430595398,0.08831724524497986,-0.2013436108827591,0.12421688437461853,0.01732592284679413,0.08172699809074402,0.04537343978881836,-0.14640703797340393,-0.18232229351997375,0.06524118781089783,0.026702195405960083,0.045105695724487305,0.1194690465927124,0.18574652075767517,-0.21061471104621887,0.22936442494392395,-0.029627129435539246,-0.20373347401618958,-0.06793265044689178,-0.12274003028869629,0.028230339288711548,0.17584887146949768,0.15862205624580383,0.21805423498153687,-0.005807429552078247,-0.016160234808921814,-0.08472687005996704,-0.18538375198841095,-0.0035888999700546265,-0.14639458060264587,0.15478190779685974,-0.22351598739624023,0.08715665340423584,-0.19053995609283447,0.1472061574459076,-0.055938974022865295,-0.11697978526353836,-0.2202862799167633,-0.18661484122276306,0.12421739101409912,-0.22524134814739227,-0.15737663209438324,0.1253584623336792,0.019842326641082764,0.024844855070114136,-0.05642281472682953,0.17819872498512268,0.18862619996070862,-0.09433421492576599,0.09059649705886841,0.20030009746551514,-0.042629554867744446,-0.17782530188560486,-0.10176727175712585,-0.2061367630958557,0.10357546806335449,0.09932917356491089,0.10722616314888,0.03321492671966553,0.04973989725112915,0.07130041718482971,-0.18814152479171753,-0.17702548205852509,-0.10979422181844711,-0.04539014399051666,-0.13656270503997803,0.06006971001625061,0.07831287384033203,0.176814466714859,0.17021897435188293,0.1503596007823944,0.18621861934661865,0.23091396689414978,0.05781441926956177,0.07876184582710266,-0.13652969896793365,-0.20703476667404175,0.22795972228050232,-0.08614490926265717,0.1166902482509613,-0.0031532198190689087,0.12126532196998596,0.23138713836669922,0.18745383620262146,0.12897562980651855,0.20793500542640686,-0.06753014028072357,-0.08297364413738251,-0.022260233759880066,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.]

def peering(peer_IPs):
    """ Control routine for robot-to-robot dynamic peering 
	argument: dict {id:ip} comes from ARGoS controller
	"""

    global peers_geth, peers_buffer

    peers_geth_enodes = getEnodes()
    peers_geth = set(getIps(peers_geth_enodes))

    for peer_ID, peer_IP in peer_IPs.items():
        if peer_IP not in peers_buffer:
            enode = tcp_enode.request(host=peer_IP, port=5000)
            if 'enode' in enode:
                w3.geth.admin.addPeer(enode)
                peers_buffer.add(peer_IP)
                print(f'Added peer: {peer_ID}')#|{enode}')

    temp = copy.copy(peers_buffer)

    for peer_IP in temp:
        if peer_IP not in peer_IPs.values():
            enode = tcp_enode.request(host=peer_IP, port=5000)
            if 'enode' in enode:
                w3.provider.make_request("admin_removePeer",[enode])

                peers_geth_enodes = getEnodes()
                if enode not in peers_geth_enodes:
                    peers_buffer.remove(peer_IP)
                    print(f'Removed peer: {peer_IP}')#|{enode}')

    # for enode in peers_geth_enodes:
    # 	peer_IP = getIp(enode)
    # 	if peer_IP not in peer_IPs.values():
    # 		w3.provider.make_request("admin_removePeer",[enode])
    # 		peers_buffer.remove(peer_IP)
    # 		print('Timed out peer: %s|%s' % (peer_ID, enode))

    tcp_peering.setData(len(peers_geth))


def blockHandle():
	""" Every time new blocks are synchronized
	# etherium = w3.fromWei(w3.eth.gtBalance(w3.eth.coinbase), 'ether')
	# my_address = sc.functions.getAddress().call 
	"""
	try:
		money = sc.functions.getMoney().call()
		previousAccepted = sc.functions.getPreviousParticipants().call()
		previousAccepted = ','.join([str(x) for x in previousAccepted])
		blockNumber = sc.functions.getBlockNumber().call()
		blockHash = sc.functions.getBlockHash().call().hex()
		previousBlockHash = sc.functions.getPreviousBlockHash().call().hex()
		version = sc.functions.version().call()

		logs['sc'].log([version, money, previousBlockHash, blockNumber, blockHash, previousAccepted])
		logs['bc_size'].log([getFolderSize('/root/.ethereum/devchain/geth/chaindata')])
	except Exception:
		print(Exception)
	

def get_server_message(server):
	full_msg = b''
	new_msg = True
	end_message = False
	while not end_message:
		msg = server.recv(1024)

		if new_msg:
			msglen = int(msg[:HEADERSIZE])
			new_msg = False

		full_msg += msg

		if len(full_msg)-HEADERSIZE == msglen:
			print("full message received")
			full_msg = pickle.loads(full_msg[HEADERSIZE:])
			end_message = True
	return full_msg

def server_training(ip, port):
	version = sc.functions.version().call()
	precision = 10**9
	print("Updated the version to:", version)
	if version:
		weights = sc.functions.getWeights().call()
		print(f"here are my before trained first 5 weights {weights[:5]}")
		weights = [float(w)/precision for w in weights]
	else :
		weights = INIT_WEIGHTS()
	with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server:
		server.connect((ip,port))
		msg = {'ID': robotID, 'weights': weights}
		msg = pickle.dumps(msg)
		msg = bytes(f'{len(msg):<{HEADERSIZE}}', "utf-8") + msg
		server.send(msg)
		print("Weights sent!")

		server_dict = get_server_message(server)
		nb_sample = server_dict['nb_samples']
		weights = server_dict['weights']
		weights = [int(w*precision) for w in weights]
		print(f"i've trained on {nb_sample} and here are my first 5 weights {weights[:5]}")
		if version == sc.functions.version().call() and nb_sample:
			sc.functions.submitWeights(nb_sample,weights).transact()
	return version

def server_training_v2(ip, port):
	precision = 10**9
	with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server:
		server.connect((ip,port))
		print('waiting for server reply...')
		server_dict = get_server_message(server)
		print('server should be ready')
		if version := sc.functions.version().call():
			weights = sc.functions.getWeights().call()
			print(f"here are my before trained first 5 weights {weights[:5]}")
			weights = [float(w)/precision for w in weights]
		else :
			weights = INIT_WEIGHTS()
		msg = {'ID': robotID, 'weights': weights, 'version': version}
		msg = pickle.dumps(msg)
		msg = bytes(f'{len(msg):<{HEADERSIZE}}', "utf-8") + msg
		server.send(msg)
		print("Weights sent!")
		server_dict = get_server_message(server)
		nb_sample = server_dict['nb_samples']
		weights = server_dict['weights']
		weights = [int(w*precision) for w in weights]
		print(f"i've trained on {nb_sample} and here are my first 5 weights {weights[:5]}")
		# if version == sc.functions.version().call() and nb_sample:
		
		sc.functions.submitWeights(nb_sample,weights).transact({"value":5*10**18})

	return version

def server_training_v3(ip, port, address):
	precision = 10**9
	with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as server:
		server.connect((ip,port))

		server_dict = get_server_message(server)

		weights = sc.functions.getWeights().call()
		weights = [float(w)/precision for w in weights]
		version = sc.functions.version().call()
		msg = {'ID': robotID, 'weights': weights, 'version': version, 'address': address}
		msg = pickle.dumps(msg)
		msg = bytes(f'{len(msg):<{HEADERSIZE}}', "utf-8") + msg
		server.send(msg)

		server_dict = get_server_message(server)
		nb_sample = server_dict['nb_samples']
		weights = server_dict['weights']
		weights = [int(w*precision) for w in weights]
		try :
			sc.functions.submitWeights(nb_sample,weights).transact({"value":price})
		except Exception:
			print(Exception)

	return version

def compute_mae(wa, wb):
	return sum(abs(wa[i]-wb[i]) for i in range(len(wa)))/len(wa)

def bad_behaviour(current, previous, rtype=2):
	if rtype == 0 :
		nb_sample = 200
		weights = [random.randint(-5*10**8, 5*10**8) for _ in range(2848)] # exp 2 & 3
	elif rtype == 1:
		weights = sc.functions.getWeights().call() # exp 4
		nb_sample = 200
	else :
		nb_sample = 200
		mae = compute_mae(current, previous)
		weights = [elem+int((random.random())*mae*2) for elem in current] # exp 5

	try:
		sc.functions.submitWeights(nb_sample,weights).transact({"value":price})
	except Exception:
		print(Exception)
		


if __name__ == '__main__':
    
	w3 = init_web3()
	sc = registerSC(w3)
	bf = w3.eth.filter('latest')

	robotID = sys.argv[1]
	print(f"robot id : {robotID}")

	#########################################################################################
	################################## SETTING UP BEHAVIOR ##################################
	#########################################################################################

	my_host = subprocess.getoutput("ip addr | grep 172.18.0. | tr -s ' ' | cut -d ' ' -f 3 | cut -d / -f 1")
	my_port = 9890
	with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:
		s.bind((my_host, my_port))
		s.listen()
		print("waiting for robot type behavior")
		clientsocket, address = s.accept()
		my_message = clientsocket.recv(1024)
		print("here is the mes:", my_message)


	if my_message.decode() == "good":
		colab = True
	elif  my_message.decode() == "bad":
		colab = False
	print(colab)
	# colab=True

	#########################################################################################
	######################## SETTING UP INITIAL WIGHTS ON BLOCKCHAIN ########################
	#########################################################################################

	precision = 10**9
	if int(robotID) == 1:
		nb_sample = 200
		weights = INIT_WEIGHTS()
		weights = [int(w*precision) for w in weights]
		rankWeights = [1, 1, 1, 1, 1, -1, -1]
		print(rankWeights)
		version = sc.functions.version().call()
		print("hey before sending weight, version =", version)
		try:
			sc.functions.setInitWeights(weights, rankWeights).transact()
		except Exception:
			print(Exception)
		version = sc.functions.version().call()
		print("hey just sent the weight, version =", version)

	logfolder = f'/root/logs/{robotID}/'
	os.system(f"rm -rf {logfolder}")
	os.makedirs(os.path.dirname(logfolder), exist_ok=True) 

	# Experiment money for each robot
	name 		  = 'smartcontract.txt'
	myParticipants=','.join([f'participant{i}' for i in range(7)])
	header        = ['version','money','previousBlockHash','blockNumber','blockHash', myParticipants]
	logs['sc'] = seblogger(logfolder+name, header)

	name = 'bc_size.csv'
	header =['MB']
	logs['bc_size'] = seblogger(logfolder+name, header)

	version = sc.functions.version().call()
	current_weights = sc.functions.getWeights().call()
	previous_weights = current_weights
	address = sc.functions.getAddress().call()

	time_sleep = 0.5
	training_interval_time = 100 # in seconds
	HEADERSIZE = 10

	tf_ip = "172.18.0.1"
	tf_port = 9801

	start_time = time.time()
	training_time = time.time()

	while True:
		# clock = time.time()-start_time

		if colab and time.time() - training_time > training_interval_time: 
			version = server_training_v3(tf_ip, tf_port, address)
			training_time = time.time()
		elif time.time() - training_time > training_interval_time: 
			bad_behaviour(current_weights, previous_weights, 2)
			training_time = time.time()

		if not colab and version < sc.functions.version().call():
			version = sc.functions.version().call()
			previous_weights = current_weights
			current_weights = sc.functions.getWeights().call()

		newBlocks = bf.get_new_entries()
		if newBlocks:
			blockHandle()

		time.sleep(time_sleep)
